# 基于端点模型驱动的前端中后台研发提效系统

Summary：毕业设计项目。

## 主要研究内容

1. 对资源(Resource)、查询(Query)、命令(Command)进行建模，简化从服务端获取数据的逻辑。
2. 实现 JSX (指 JSX 的静态子集)与可视化的互操作性，即实现 JSX -> 可视化搭建 -> JSX (Code In, Code Out)的操作链路。

## 为什么

技术人员与设计人员协同工作，快速创建 B 端应用。

### 工作流程

- 设计人员利用所见即所得的可视化工具搭建 UI，产出页面组件 JSX 代码；
- 后端人员对端点进行建模，为页面中的表格等组件绑定查询或命令；
- 前端人员通过代码编辑器，编写复杂逻辑、定制化 UI 组件；

## 目标产物

前端中后台研发提效系统：

- 端点模型协议 Schema
- 端点模型解析器 Parser
- 特定平台的端点模型运行时或代码生成器
- 端点模型驱动的数据获取库

- 以 JSX 为基础格式的可视化 UI 搭建器：支持与数据获取库结合使用，直接为表格等绑定查询或命令
- 预设组件，如数据表格

## JSX 编辑器原理

通过 babel 转换代码与搭建态，**约定**特定结构（特定写法）为可视化交互可识别的内容。

为什么要约定？因为 JS 太灵活了。例如：

```js
a.map(...)
```

对于这样的结构，我们可能觉得 `a` 是一个数组，但 `a` 也有可能是这个样子：

```js
var a = {
  map: () => { ... }
}
```

JS 没有类型概念，所以必须加以一定的约定，我们才能让可视化搭建器出现**特定的交互**。

## 思路来源

- [graphql](https://graphql.org/)
- [rtk query](https://redux-toolkit.js.org/rtk-query/overview)

最初是在写 rtk query 时想到，如果抽象了数据获取逻辑，其实大部分工作都是调用 `useQuery` 与绑定数据到 UI。之后在想，如果能接入模型驱动的能力，需要写的代码就非常少了，就有更多时间摸鱼了。

这个项目，因为只有两个月，最终只会做到支持 REST 的层级，而不是到模型驱动的层级，即这是一个纯前端的团队协作代码平台。

## 计划

- 0120-0210: 调研现有开源项目，开题报告
- 0210-0320: 端点模型相关
- 0320-0410: 可视化搭建相关
- 0410-0420: 面向演示编程.jpg

## 项目结构概述

暂定：

- app: 主应用
- canvas: JSX 画布，用于拖放 UI，绑定查询
- model-editor：模型编辑器
- browser-fs：模拟 node fs
- sandbox: 代码沙盒，用于渲染 JSX 代码
- query：数据获取库
- server：Node 服务器

## 进度

- [x] 开源项目、产品调研
- [ ] 可视化编辑器
- [ ] 模型搭建器
- [ ] 面向演示的平台

## 调研参考

思路类似的平台：

- appsmith
- budibase
- tooljet

支持简单的 JSX 与可视化互转的库，可惜暂时不维护了：

- blocks-ui
